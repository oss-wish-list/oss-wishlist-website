---
import Layout from '../../components/Layout.astro';

export async function getStaticPaths() {
  // In a real implementation, this would fetch from a database
  const wishlists = [
    {
      id: 'vue-test-utils',
      project_name: 'Vue Test Utils',
      username: 'sarah-chen',
      repo_url: 'https://github.com/vuejs/test-utils',
      description: 'Official unit testing utility library for Vue.js',
      detailed_description: `Vue Test Utils is the official unit testing utility library for Vue.js. It provides a set of utility functions for testing Vue components in isolation. The library is used by thousands of Vue.js applications worldwide and is a critical part of the Vue.js ecosystem.

Our v2.0 release is approaching, and we want to ensure the highest security and quality standards. We're also looking to improve our documentation and onboarding process to help more developers contribute effectively.`,
      github_stars: '3.2k',
      monthly_downloads: '2.1M',
      website_url: 'https://vue-test-utils.vuejs.org',
      services_needed: [
        {
          title: 'Security audit for v2.0 release',
          description: 'Comprehensive security review of the new codebase, dependency analysis, and vulnerability assessment.',
          priority: 'high',
          estimated_cost: '$3,000-5,000'
        },
        {
          title: 'Documentation restructure and improvement',
          description: 'Reorganize documentation structure, add more examples, and create video tutorials.',
          priority: 'medium',
          estimated_cost: '$2,000-3,000'
        },
        {
          title: 'Community onboarding process development',
          description: 'Create contributor guidelines, mentorship program, and issue triage processes.',
          priority: 'medium',
          estimated_cost: '$1,500-2,500'
        },
        {
          title: 'Performance optimization consulting',
          description: 'Review and optimize test execution performance for large test suites.',
          priority: 'low',
          estimated_cost: '$1,000-2,000'
        }
      ],
      budget_range: '$5K-10K',
      budget_details: 'Looking for either individual service sponsors or a comprehensive package. Open to both one-time funding and ongoing sponsorship arrangements.',
      contact_email: 'sarah@example.com',
      contact_methods: [
        { type: 'email', value: 'sarah@example.com', label: 'Direct Email' },
        { type: 'twitter', value: '@sarahc_dev', label: 'Twitter' },
        { type: 'discord', value: 'Vue.js Community Discord', label: 'Discord' }
      ],
      created_date: '2024-09-15',
      updated_date: '2024-09-15',
      tags: ['Vue.js', 'Testing', 'JavaScript', 'Frontend'],
      urgency: 'medium',
      project_stage: 'mature',
      team_size: '3 core maintainers',
      project_age: '5 years',
      license: 'MIT',
      main_language: 'JavaScript',
      why_support: `Supporting Vue Test Utils means supporting the entire Vue.js ecosystem. Our library is used by hundreds of thousands of developers worldwide, and improvements to our tooling directly impact the productivity and happiness of the Vue.js community.

By sponsoring our security audit, you'll be helping ensure that Vue.js applications everywhere have access to secure, reliable testing tools. Your support will be prominently featured in our documentation and release announcements.`,
      impact_metrics: [
        'Used by 500,000+ developers monthly',
        'Core dependency for 80% of Vue.js projects',
        '3,200 GitHub stars and growing',
        'Featured in official Vue.js documentation'
      ],
      recent_achievements: [
        'Released TypeScript rewrite increasing type safety',
        'Reduced bundle size by 40% in latest version',
        'Added support for Vue 3 Composition API',
        'Improved test execution speed by 60%'
      ]
    }
  ];
  
  return wishlists.map(wishlist => ({
    params: { id: wishlist.id },
    props: { wishlist }
  }));
}

const { wishlist } = Astro.props;

const priorityColors = {
  low: 'bg-gray-100 text-gray-800',
  medium: 'bg-yellow-100 text-yellow-800',
  high: 'bg-red-100 text-red-800'
};

const urgencyColors = {
  low: 'bg-green-100 text-green-800',
  medium: 'bg-yellow-100 text-yellow-800', 
  high: 'bg-red-100 text-red-800'
};

const stageColors = {
  early: 'bg-blue-100 text-blue-800',
  growing: 'bg-purple-100 text-purple-800',
  mature: 'bg-gray-100 text-gray-800',
  scaling: 'bg-orange-100 text-orange-800',
  'enterprise-ready': 'bg-green-100 text-green-800'
};
---

<Layout title={`${wishlist.project_name} Wishlist - OSS Wishlist`} description={`Support ${wishlist.project_name}: ${wishlist.description}`}>
  <!-- Back Navigation -->
  <div class="bg-gray-50 py-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <a href="/wishlists" class="text-blue-600 hover:text-blue-700 flex items-center">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        Back to Wishlists
      </a>
    </div>
  </div>

  <!-- Project Header -->
  <section class="py-12 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-3 gap-8">
        <div class="md:col-span-2">
          <div class="flex items-start space-x-4 mb-6">
            <img src="/oss-wish.webp" alt={wishlist.project_name} class="w-16 h-16 rounded-lg" />
            <div class="flex-1">
              <h1 class="text-4xl font-bold text-gray-900 mb-2">{wishlist.project_name}</h1>
              <p class="text-lg text-gray-600 mb-4">@{wishlist.username}</p>
              
              <div class="flex flex-wrap gap-3 mb-4">
                <span class={`px-3 py-1 text-sm rounded-full ${urgencyColors[wishlist.urgency]}`}>
                  {wishlist.urgency} priority
                </span>
                <span class={`px-3 py-1 text-sm rounded-full ${stageColors[wishlist.project_stage]}`}>
                  {wishlist.project_stage}
                </span>
                <span class="px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800">
                  {wishlist.license}
                </span>
              </div>
              
              <!-- Project Stats -->
              <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                <div>
                  <span class="text-gray-600">GitHub Stars</span>
                  <div class="font-semibold">{wishlist.github_stars}</div>
                </div>
                <div>
                  <span class="text-gray-600">Monthly Downloads</span>
                  <div class="font-semibold">{wishlist.monthly_downloads}</div>
                </div>
                <div>
                  <span class="text-gray-600">Team Size</span>
                  <div class="font-semibold">{wishlist.team_size}</div>
                </div>
                <div>
                  <span class="text-gray-600">Project Age</span>
                  <div class="font-semibold">{wishlist.project_age}</div>
                </div>
              </div>
            </div>
          </div>
          
          <p class="text-lg text-gray-700 mb-6">{wishlist.description}</p>
          
          <div class="prose max-w-none">
            {wishlist.detailed_description.split('\n\n').map(paragraph => (
              <p class="text-gray-700 mb-4">{paragraph}</p>
            ))}
          </div>
        </div>
        
        <!-- Support CTA Sidebar -->
        <div class="bg-gray-50 p-6 rounded-lg h-fit">
          <h2 class="text-xl font-bold text-gray-900 mb-4">Support This Project</h2>
          
          <div class="mb-6">
            <div class="text-sm text-gray-600 mb-1">Total Budget Needed</div>
            <div class="text-2xl font-bold text-green-600">{wishlist.budget_range}</div>
          </div>
          
          <div class="space-y-3 mb-6">
            <a 
              href={`mailto:${wishlist.contact_email}?subject=Support for ${wishlist.project_name}&body=Hi! I'm interested in supporting your project. Let's discuss how I can help.`}
              class="w-full bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors text-center block font-semibold"
            >
              Contact to Support
            </a>
            <a 
              href={wishlist.repo_url}
              target="_blank"
              rel="noopener noreferrer"
              class="w-full border border-gray-300 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors text-center block"
            >
              View on GitHub
            </a>
            {wishlist.website_url && (
              <a 
                href={wishlist.website_url}
                target="_blank"
                rel="noopener noreferrer"
                class="w-full border border-gray-300 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors text-center block"
              >
                Visit Website
              </a>
            )}
          </div>
          
          <!-- Contact Methods -->
          <div class="border-t pt-4">
            <h3 class="font-semibold text-gray-900 mb-3">Contact Methods</h3>
            <div class="space-y-2">
              {wishlist.contact_methods.map(method => (
                <div class="flex justify-between text-sm">
                  <span class="text-gray-600">{method.label}</span>
                  <span class="text-gray-900">{method.value}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Needed -->
  <section class="py-12 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-gray-900 mb-8">Services Needed</h2>
      
      <div class="grid md:grid-cols-2 gap-6">
        {wishlist.services_needed.map(service => (
          <div class="bg-white p-6 rounded-lg border shadow-sm">
            <div class="flex justify-between items-start mb-3">
              <h3 class="text-lg font-semibold text-gray-900">{service.title}</h3>
              <span class={`px-2 py-1 text-xs rounded-full ${priorityColors[service.priority]}`}>
                {service.priority}
              </span>
            </div>
            <p class="text-gray-700 mb-4">{service.description}</p>
            <div class="text-sm text-green-600 font-medium">{service.estimated_cost}</div>
          </div>
        ))}
      </div>
      
      <div class="mt-8 bg-white p-6 rounded-lg border">
        <h3 class="text-lg font-semibold text-gray-900 mb-3">Budget Details</h3>
        <p class="text-gray-700">{wishlist.budget_details}</p>
      </div>
    </div>
  </section>

  <!-- Why Support -->
  <section class="py-12 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-2 gap-12">
        <div>
          <h2 class="text-3xl font-bold text-gray-900 mb-6">Why Support This Project?</h2>
          <div class="prose max-w-none">
            {wishlist.why_support.split('\n\n').map(paragraph => (
              <p class="text-gray-700 mb-4">{paragraph}</p>
            ))}
          </div>
        </div>
        
        <div>
          <h3 class="text-xl font-semibold text-gray-900 mb-4">Impact Metrics</h3>
          <ul class="space-y-3 mb-8">
            {wishlist.impact_metrics.map(metric => (
              <li class="flex items-center text-gray-700">
                <svg class="w-5 h-5 text-green-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                {metric}
              </li>
            ))}
          </ul>
          
          <h3 class="text-xl font-semibold text-gray-900 mb-4">Recent Achievements</h3>
          <ul class="space-y-3">
            {wishlist.recent_achievements.map(achievement => (
              <li class="flex items-center text-gray-700">
                <svg class="w-5 h-5 text-blue-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                {achievement}
              </li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Tags -->
  <section class="py-8 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-wrap gap-2">
        {wishlist.tags.map(tag => (
          <span class="px-3 py-1 bg-white text-gray-700 text-sm rounded border">{tag}</span>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-12 bg-blue-600">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl font-bold text-white mb-4">Ready to Support {wishlist.project_name}?</h2>
      <p class="text-xl text-blue-100 mb-8">Get in touch to discuss how you can help make this project thrive</p>
      <div class="flex justify-center space-x-4">
        <a 
          href={`mailto:${wishlist.contact_email}?subject=Support for ${wishlist.project_name}`}
          class="bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
        >
          Contact Maintainer
        </a>
        <a href="/wishlists" class="border border-blue-300 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
          Browse Other Projects
        </a>
      </div>
    </div>
  </section>
</Layout>